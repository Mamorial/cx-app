<html>
	<head>
		<meta charset="UTF-8"/>
		<title></title>
		<script src="../../js/headHtml.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div id="userIndex">
			<header class="mui-bar mui-bar-nav" style="box-shadow: none;">
			    <h1 class="mui-title">我</h1>
			</header>
			<div class="mui-content">
				<div style="width: 100%;height: 130px;background: #25A7FF;">
					<div @click="loginIn" style="width: 100%;height: 80px;text-align: center;">
						<img src="../../images/userlogo.png" style="width: 80px;height: 80px;border-radius: 50%;display: block;margin: auto;" />
					</div>
					<div v-if="isLogin" style="width: 100%;height: 50px;line-height: 50px;text-align: center;font-size: 17px;color: #fff;">{{userInfo.name}}</div>
				</div>
				<div style="width: 100%;height: auto;overflow: hidden;margin-top: 20px;">
					<ul class="mui-table-view search-result-list">
						<li class="mui-table-view-cell" @click="userMessage">
							<a class="mui-navigate-right">
								 <span class="mui-icon iconfont icon-message"></span>
								我的消息
							</a>
						</li>
						<li class="mui-table-view-cell" @click="userColl">
							<a class="mui-navigate-right">
								 <span class="mui-icon iconfont icon-shoucang-copy"></span>
								我的收藏
							</a>
						</li>
						<li class="mui-table-view-cell" @click="userCom">
							<a class="mui-navigate-right">
								 <span class="mui-icon iconfont icon-iconfonttousubaoxiu-copy"></span>
								我的投诉
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</body>
</html>
<script type="text/javascript">
	var app = new Vue({
		el: '#userIndex',
		data: {
			isLogin: false,
			userInfo: {
				name: ''
			}
		},
		mounted: function() {
			var self = this;
			window.addEventListener('refresh', function(e) {
				self.init();
				console.log(fc.userInfo.userName);
//				if(e.detail.userName) {
//					self.isLogin = true;
//					self.userInfo.name = e.detail.userName;
//				}
				
			}, false);
			this.init();
		},
		methods: { 
			//初始化
			init: function() {
				var self = this;
				if(fc.userInfo.userName) {
					self.isLogin = true;
					self.userInfo.name = fc.userInfo.userName;
					
				}
				
			},
			//登录页面
			loginIn: function() {
				mui.openWindow({
					url: 'login.html',
					id: 'login',
					show: {
						duration: 300
					},
					waiting: {
						autoshow: false,
						title: '正在加载...'
					}
				})
			},
			//我的消息
			userMessage: function() {
				mui.openWindow({
					url: 'userMessage.html',
					id: 'userMessage',
					show: {
						duration: 300
					},
					waiting: {
						autoshow: false,
						title: '正在加载...'
					}
				})
			},
			//我的收藏 
			userColl: function() {
				mui.openWindow({
					url: '../busHtmls/userCollList.html',
					id: 'userCollList',
					show: {
						duration: 300
					},
					waiting: {
						autoshow: false,
						title: '正在加载...'
					}
				})
			},
			//我的投诉
			userCom: function() {
				mui.openWindow({
					url: 'userComplaint.html',
					id: 'userComplaint',
					show: {
						duration: 300
					},
					waiting: {
						autoshow: false,
						title: '正在加载...'
					}
				})
			}
		}
	})
</script>